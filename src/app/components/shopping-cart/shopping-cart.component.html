<section class="py-5">
  <div class="container">
    <div class="row">
      <!-- Shopping Cart -->
      <div class="col-12 col-sm-8">
        <div class="jumbtron bg-light p-4">
          <h3 class="">Shopping Cart</h3>
          <p class="text-justify pb-3">
            Thank you for choosing our eShop. We strive to shipp next day.</p>
          <table class="table table-hover table-responsive-sm table-sm" *ngIf="!cartState">
            <thead class="thead-light">
              <tr>
                <th scope="col">Cart item</th>
                <th scope="col">Product</th>
                <th scope="col">Price</th>
                <th scope="col">Qty</th>
                <th scope="col">Total</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let product of products; let i = index">
                <td class="w-25 px-5 py-3"><a [routerLink]="['/product', product.name]" routerLinkActive="router-link-active" ><img src="{{ product.imagelink }}" class="img-fluid" alt=""></a></td>
                <td>{{ product.name}}</td>
                <td>{{ product.price | currency: USD }}</td>
                <td><input type="number" name="quantity" [value]="product.quantity" [(ngModel)]=product.quantity (change)="onAddToCart(product)"
                    class="text-center"></td>
                <td>{{ totalPrice }}</td>
                <td><a class="btn btn-light" (click)="OnRemoveFromCart(product)"><i class="fa fa-times text-black-50"></i></a></td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="cartState">
            <h3 class="lead bg-light">Shopping Cart is Empty!</h3>
            <button class="btn btn-primary mt-3" href="" [routerLink]="['/shopping']" routerLinkActive="router-link-active">Go
              shop!</button>
          </div>
        </div>
      </div>

      <!-- Order Summary -->

      <div class="col-12 col-sm-4">
        <div class="jumbtron bg-light p-4">
          <h3 class="">Order Summary</h3>
        </div>

        <!-- Checkout Form -->

        <form #checkOutForm="ngForm" (ngSubmit)="onSubmit(checkOutForm)" class="mb-5 mb-md-0">
          <div class="form-group card card-body bg-light">
            <div class="row">
              <label for="subtotal" class="col-sm-9 col-form-label text-right">Subtotal</label>
              <div class="col-sm-3">
                <input type="text" class="form-control bg-light border-0" disabled id="subtotal" [(ngModel)]="subtotal"
                  name="subtotal" aria-describedby="subtotalHelp" />
              </div>
            </div>
            <div class="row">
              <label for="shipping" class="col-sm-9 col-form-label text-right">Shipping</label>
              <div class="col-sm-3">
                <input type="text" class="form-control bg-light border-0" disabled id="shipping" [(ngModel)]="shipping"
                  name="shipping" value="{{ shipping | currency: USD }}" aria-describedby="shippingHelp" />
              </div>
            </div>
            <div class="row">
              <label for="tax" class="col-sm-9 col-form-label text-right">Tax</label>
              <div class="col-sm-3">
                <input type="text" class="form-control bg-light border-0" disabled id="tax" [(ngModel)]="tax" name="tax"
                  aria-describedby="taxHelp" />
              </div>
            </div>
            <hr/>
            <div class="row">
              <label for="total" class="col-sm-9 col-form-label text-right">Total</label>
              <div class="col-sm-3">
                <input type="text" class="form-control bg-light border-0" disabled id="total" [(ngModel)]="total" name="total"
                  aria-describedby="totalHelp" />
              </div>
            </div>
          </div>
          <div class="text-right">
            <button class="btn btn-primary ml-auto" [disabled]="!checkOutForm.form.valid">Checkout</button>
          </div>
            
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" [ngClass]="{'is-invalid':name.touched && !name.valid}"
              required ngModel #name="ngModel" name="name" minlength="2" aria-describedby="nameHelp" placeholder="Please enter your name" />
            <div class="invalid-feedback" [hidden]="!name.errors?.required">Name is required</div>
            <div class="invalid-feedback" [hidden]="!name.errors?.minlength">Name must be at least 2 characters </div>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" [ngClass]="{'is-invalid':email.touched && !email.valid}"
              required ngModel name="email" #email="ngModel" pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"
              placeholder="Please enter your email" />
            <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
            <div class="invalid-feedback" [hidden]="!email.errors?.required">Email is required</div>
            <div class="invalid-feedback" [hidden]="!email.errors?.pattern">Email is not valid</div>
          </div>
          <div class="form-group">
            <label for="address">Address</label>
            <input type="text" class="form-control" id="address" [ngClass]="{'is-invalid':address.touched && !address.valid}"
              required ngModel name="address" #address="ngModel" minlength="5" placeholder="Please enter your address" />
            <div class="invalid-feedback" [hidden]="!address.errors?.required">Address is required</div>
            <div class="invalid-feedback" [hidden]="!address.errors?.minlength">Address must be at least 5 characters
            </div>
          </div>
          <div class="form-group">
            <label for="city">City</label>
            <input type="text" class="form-control" id="city" [ngClass]="{'is-invalid':city.touched && !city.valid}"
              required ngModel #city="ngModel" name="city" minlength="3" aria-describedby="nameHelp" placeholder="Please enter city" />
            <div class="invalid-feedback" [hidden]="!city.errors?.required">City is required</div>
            <div class="invalid-feedback" [hidden]="!city.errors?.minlength">City must be at least 2 characters </div>
          </div>
          <div class="form-group">
            <label for="phonenumber">Phone number</label>
            <input type="text" class="form-control" id="phonenumber" [ngClass]="{'is-invalid':phonenumber.touched && !phonenumber.valid}" placeholder="Please enter your phonenumber"
              required ngModel #phonenumber="ngModel" name="phonenumber" minlength="10" pattern="^[0-9]*$" />
            <div class="invalid-feedback" [hidden]="!phonenumber.errors?.required">Phonenumber is required</div>
            <div class="invalid-feedback" [hidden]="!phonenumber.errors?.minlength">Phonenumber must be at least 10
              digits </div>
            <div class="invalid-feedback" [hidden]="!phonenumber.errors?.pattern">Phonenumber is not valid</div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>